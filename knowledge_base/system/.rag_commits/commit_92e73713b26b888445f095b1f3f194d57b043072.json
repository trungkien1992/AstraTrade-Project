{
  "what_changed": "Final design",
  "code_changes": "diff --git a/knowledge_base/docs/project_design/bounty_requirements.md b/knowledge_base/docs/project_design/bounty_requirements.md\nnew file mode 100644\nindex 0000000..bf22be0\n--- /dev/null\n+++ b/knowledge_base/docs/project_design/bounty_requirements.md\n@@ -0,0 +1,131 @@\n+Build A v0 Gamified Perps Trading App, Using The Extended API\n+\n+by\n+StarkWare\n+\n+\n+Bounty\n+\n+Submissions Open\n+\n+Details\n+Gamified perps mobile app\n+\n+RFP by Starkware\n+\n+\n+\n+Introduction\n+\n+Starkware is looking for mobile-first developers wanting to build a gamified mobile app for trading perpetuals, built on Starknet, using Extended's API in the backend, with the goal of creating a sustainable business. The goal is to make trading accessible to everyone, not just crypto-native traders but anyone with a phone. The app makes trading fast, fun, and intuitive by combining Pokémon GO/Duolingo-type gaming mechanics (e.g., scheduled rewards, levels, streak-based XP, leaderboard, smooth UI components, building a collection of earned rewards, social and competitive features, etc.) and perpetual trading. The app is not just another gamified DeFi app with confetti and bright colors. It brings perps trading to everyone.\n+\n+\n+\n+This RFP is structured as a time-bound open bounty, available to all. After the submission deadline, we will evaluate the submitted v0s and select the team whose prototype best meets the outlined requirements. The selected team will be rewarded for their work and invited to continue the project beyond the initial scope. While only one team will be formally chosen to advance, we remain eager to collaborate with other motivated teams who demonstrate strong potential and a desire to work closely with StarkWare.\n+\n+\n+\n+\n+We look for:\n+\n+A basic v0 that showcases your skills as a team. \n+\n+Design proposals for the frontend. How gamified can this app be (e.g., streak-based XP, leaderboard, levels, daily reminders, scheduled rewards, etc.)? \n+\n+A dedicated team that wants to take full ownership of this idea.\n+\n+Extended API integration for running perpetuals in the backend.\n+\n+\n+\n+What we offer:\n+\n+Financial support is provided if proven motivated and successful.\n+\n+Support for integrating the Extended API.\n+\n+Idea advisorship.\n+\n+Full ownership of the idea.\n+\n+\n+\n+User archetype:\n+\n+TikTok Generation (18-28): Gen-Z crypto-curious users who are reward-driven, mobile-first, and care more about vibes and status than reading charts.\n+\n+Degens and Casual Traders: Want quick hits of excitement, and love bragging rights.\n+\n+\n+\n+Feature ideas/notes/wishlist:\n+View the following bullet points as features that will make the app UX friendly and potentially go viral. Not all features must be added to the v0/POC, but these give you an idea of the app’s vision.\n+\n+Use native iOS and Android features (e.g., widgets, push notifications, shortcuts, Haptic Feedback Engine, present real-time information on the lock screen, etc.).\n+\n+Remove 80% of UI complexity,  make it feel like Snapchat or BeReal. Make the UX feel alive, instant XP, haptics, and visual feedback. Not cluttered by charts or noise. Simple actions that feel like a snap or locket. Implement a reward loop for users to come back.\n+\n+Simplify the trading experience and come up with creative trading actions. The goal is to make the UX as smooth as possible. Users should not feel the burden of trading but rather the excitement of placing bets. \n+\n+Each user has a castle, a garden, or a mini-planet. Each trade helps cultivate this ecosystem. Worse trades harm the user’s ecosystem. Bad traders don’t completely lose their ecosystem; it rebuilds over time, encouraging them to stay. Provide basic (NFA) trading strategies and tips to support less successful traders.\n+\n+Users should be able to meme about their wins/losses online and share their performance with online communities. Each unique trade, which can be set based on the trade amount (i.e., X traded +$50), number of trades in a day, cumulative wins, streaks, etc., is collected as an NFT, representing a milestone. This NFT can be added to their ecosystem (castle/garden/mini-planet) to enrich it. Users compare their ecosystems online, which gives the user a shareable reputation as a trader.\n+\n+Every action (trade, copy-trade, invite, streak) gives XP. Leveling up is a flex and unlocks visual graphics. Leveling up increases the user’s position in the leaderboard. It also grants them NFTs that can be added to their ecosystem (castle/garden/mini-planet).\n+\n+Users can join clans/alliances and challenge their friends in trades. Users must stay consistent with trading against their friends, or else they lose the battle. \n+\n+Free-to-play/mock trading for the first trades, which earns users rare NFTs (similar to how users earn rare Pokémon cards when they first start playing Pokémon TCG pocket). Users can only continue playing/trading/growing their ecosystem if they use real currencies. \n+\n+Onboarding includes a simple step-by-step gamified tutorial when the user opens the app. Users don’t trade real money. They win XP, grow their ecosystem, and get a taste of the app.\n+\n+\n+\n+Tech stack:\n+\n+Extended API to trade the perpetuals. Note: given Extended’s migration from StarkEx to public Starknet starting the first half of July 2025, the API will remain the same, apart from the signed payloads.\n+\n+Starknet.dart mobile SDK.\n+\n+Cairo-lang for writing NFT contracts and for the points system leaderboard. Contracts are deployed on Starknet.\n+\n+No gas fees, the Starknet paymaster is integrated to sponsor the user’s fees. \n+\n+\n+\n+v0/POC includes:\n+\n+A frontend design proposal.\n+\n+A mobile-first frontend built with Starknet.dart.\n+\n+Basic integration with the Extended API (place one real trade).\n+\n+XP tracking for trades and streaks.\n+\n+A basic leaderboard.\n+\n+Free-to-play mode/mock trades (optional).\n+\n+Paymaster integration to remove gas fees.\n+\n+\n+\n+Funding and revenue potential:\n+\n+Fast track access to the Starkware and the Starknet Foundation’s grants programs. Up to $25k for seed grants and up to $1m for growth grants (if the app has high potential). \n+\n+As Extended perpetual is used in the backend, the building team and Extended can agree upon a revenue-sharing model.\n+\n+We’ll support long-term builders to go from MVP to a full product.\n+\n+\n+\n+IP and Ownership:\n+\n+You retain full ownership of the frontend and design you create.\n+\n+Code can be open or closed source, up to you.\n+\n+Starkware will provide design feedback and technical support, but won't claim rights to the app.\n+\ndiff --git a/knowledge_base/docs/project_design/frontend_proposal.md b/knowledge_base/docs/project_design/frontend_proposal.md\nnew file mode 100644\nindex 0000000..2941c98\n--- /dev/null\n+++ b/knowledge_base/docs/project_design/frontend_proposal.md\n@@ -0,0 +1,96 @@\n+AstraTrade: Frontend Proposal - A New Frontier in Gamified Finance\n+Executive Summary\n+AstraTrade reimagines gamified finance by transforming the complexities of perpetuals trading and blockchain into an addictive, visually stunning, and intuitively interactive cosmic growth experience. This frontend proposal details our vision for a user interface and experience (UI/UX) that radically abstracts technical jargon, prioritizes seamless engagement, and leverages cutting-edge web technologies to deliver unparalleled immersion and retention. For venture judges, this represents a unique opportunity to invest in a product with mass-market appeal, high user stickiness, and a clear path to monetization, all built on a foundation of innovative design and robust technology.\n+1. Vision & Core Principles: The Alchemy of Engagement\n+Our frontend philosophy is rooted in the \"Cosmic Catalyst\" design, focusing on creating a \"flow state\" for the user. We achieve this by:\n+Radical Abstraction: Every blockchain term and trading complexity is meticulously hidden behind intuitive, enchanting cosmic metaphors and satisfying visual effects. The user interacts with \"Stellar Flux\" and \"Lumina,\" not candlesticks and crypto.\n+Immersive Visual Storytelling: The player's journey is told through the dynamic evolution of their personal mini-planet, making progress tangible, aspirational, and deeply personal.\n+Instant Gratification & Variable Rewards: Every interaction, from a simple tap to a strategic trade, provides immediate, delightful, and often unpredictable multisensory feedback, driving continuous engagement.\n+Seamless Progression: A clear, aesthetically pleasing path of improvement that always feels achievable, yet offers aspirational peaks of cosmic mastery and social prestige.\n+Emotional Connection: Fostering a sense of ownership, accomplishment, and belonging within a vibrant cosmic community.\n+2. Key Frontend Pillars: Crafting the Cosmic Experience\n+2.1. Immersive Visuals & Dynamic World Building\n+The planet is the heart of AstraTrade's visual identity. Our frontend will bring it to life with:\n+3D Planet Rendering (three.js): A central, interactive 3D planet will be the primary visual canvas.\n+Dynamic Evolution: The planet will visibly transform based on player progress:\n+F2P Growth: Accumulation of Stellar Shards (SS) will trigger subtle, organic growth – new flora sprouting, small, intricate structures appearing, and atmospheric density visibly increasing.\n+Pro Trader Metamorphosis: \"Genesis Ignition\" will unleash a spectacular, full-screen animation of rings forming, energy conduits appearing, and the Quantum Core erupting with light, permanently altering the planet's appearance. Lumina infusions will visibly illuminate \"Cosmic Genesis Nodes\" and pathways on the planet's surface.\n+Interactive Elements: Astro-Forgers will orbit the planet, their activity visually represented. Tapping the planet for SS will trigger localized particle bursts and ripple effects.\n+Particle Systems & Effects: Extensive use of particle systems to convey energy flow, resource generation, and special events.\n+SS Generation: Customizable particle bursts (color, density, animation) for each SS generation.\n+Lumina Harvest: A cascade of glowing Lumina particles visually flowing from the \"Cosmic Forge\" UI into the Quantum Core.\n+Shield Aura: A shimmering, protective barrier effect when Shield Dust is consumed.\n+Thematic Biomes: Distinct visual biomes (Verdant, Volcanic, Crystalline, and Pro-exclusive ones) will offer diverse aesthetic experiences and visual cues for gameplay mechanics.\n+2.2. Intuitive & Abstracted UI/UX\n+Our design philosophy dictates that no user should ever encounter blockchain or traditional trading jargon. Every element is a cosmic metaphor.\n+\"Cosmic Forge\" (Trading UI):\n+Fluid Interaction: Instead of order books, a sleek, animated interface where users \"calibrate their cosmic trajectory\" (set trade parameters).\n+Direction: Clearly represented by \"Orbital Ascent\" (long) and \"Gravitational Descent\" (short) visual buttons.\n+\"Stellar Flux\" Graph: Real-time market data visualized as undulating energy waves or shimmering nebulae, providing intuitive visual cues for trends without numbers.\n+\"Cosmic Forecasts\": Short, thematic LLM-generated text snippets (e.g., \"Nebula Forming: Volatility Ahead\") displayed subtly.\n+\"Lumina Conduit\" (On-Ramp UI):\n+A visually engaging, animated interface for fiat-to-crypto conversion. The user \"channels\" external energy, seeing it flow into their \"Lumina Reservoir\" (account balance).\n+Clear, simplified steps, abstracting away all backend complexities.\n+\"Lumina Harvest Efficiency Gauge\": A dynamic, pulsating energy bar that fills up to indicate the success of a real trade in generating Lumina. No explicit PnL numbers shown to the user.\n+\"Cosmic Vault\" / \"Lumina Reservoir\": Visually appealing displays for in-game currency balances, using cosmic iconography.\n+Seamless Onboarding: The \"First Glimmer\" login is a single tap. The \"Genesis Ignition\" is a guided, visually rewarding quest, not a tutorial on crypto.\n+2.3. Responsive & Performant Design\n+AstraTrade will deliver a consistent, high-quality experience across all devices.\n+Mobile-First Approach: Designed from the ground up for optimal touch interaction and screen real estate on mobile devices.\n+Tailwind CSS: Utilized extensively for a fully responsive layout, ensuring elements scale gracefully and maintain visual integrity across different screen sizes (phones, tablets, desktops).\n+Performance Optimization:\n+Efficient 3D Rendering: three.js scenes will be optimized for mobile GPUs, employing techniques like level-of-detail (LOD), instancing, and careful polygon budgeting.\n+Particle System Management: Particle effects will be optimized to prevent performance bottlenecks.\n+Minimal CLS: Careful layout and asset loading to prevent Cumulative Layout Shifts, ensuring a smooth visual experience.\n+Lazy Loading: Assets loaded only when needed to reduce initial load times.\n+2.4. Engaging Feedback Loops\n+Every user action is met with immediate, satisfying, and multi-sensory feedback.\n+Visual Feedback: Particle bursts, glowing effects, animations, and dynamic UI changes for SS generation, Lumina harvest, upgrades, and special events.\n+Auditory Feedback (Tone.js):\n+Distinct \"chimes\" for SS generation, with unique sounds for \"Crit Forges.\"\n+Satisfying \"thrums\" and \"whooshes\" for Lumina harvesting and infusions.\n+Dynamic background music that subtly layers and evolves with player progress and market \"Stellar Flux.\"\n+Haptic Feedback: (Where supported on mobile) Subtle vibrations for key interactions like successful taps or significant upgrades.\n+2.5. Social & Prestige Presentation\n+Dual Leaderboards: Visually distinct \"Trade Token Leaderboard\" (SS) and \"Lumina Flow Leaderboard\" (LM), featuring player avatars and mini-planet icons. Smooth scrolling and intuitive navigation.\n+\"Verified Lumina Weaver\" Flair: A prominent, animated cosmic aura around the player's planet and avatar, instantly signaling their elevated status across all social features.\n+\"Trading Constellations\" (Guilds): A dynamic galactic map where member planets visibly cluster and grow brighter based on collective progress, fostering a strong sense of belonging and achievement.\n+\"Pro Trader Spotlight\": A visually appealing rotating display showcasing top players' planets and achievements, inspiring aspiration.\n+3. Frontend Technology Stack\n+Our choice of technologies is driven by the need for a highly performant, visually rich, and maintainable application:\n+Frontend Framework: Flutter (for iOS & Android Native Apps) / React (for Web)\n+Flutter: Chosen for its ability to build natively compiled, high-performance, and visually rich applications for iOS and Android from a single codebase. Its expressive UI toolkit and strong support for custom animations and 3D rendering (via packages or integration with native graphics APIs) make it ideal for delivering the immersive experience AstraTrade demands on mobile.\n+React: Retained for the web version, leveraging its component-based architecture and vast ecosystem for browser-based access. This allows for broad platform reach while optimizing for each environment.\n+Component-Based: Both frameworks enable modular development, reusability of UI elements, and efficient state management.\n+Declarative UI: Simplifies complex interactive elements and ensures predictable behavior.\n+Ecosystem: Access to a vast library of tools and community support for both Flutter and React.\n+Styling: Tailwind CSS (for Web) / Custom Thematic Styling (for Flutter)\n+Tailwind CSS: Utilized extensively for the web version for rapid UI development and consistent design system implementation, ensuring responsiveness.\n+Custom Thematic Styling (Flutter): Flutter's powerful widget system and custom painting capabilities will be leveraged to create bespoke, highly animated, and thematically consistent UI components that deliver the unique cosmic aesthetic without relying on external CSS frameworks.\n+3D Graphics: three.js (for Web) / Flutter's flutter_3d_controller or custom OpenGL/Metal integration (for Flutter)\n+Web-Native 3D (three.js): Powerful library for creating and rendering complex 3D scenes directly in the browser.\n+Flutter 3D: For native mobile, we will explore flutter_3d_controller for simpler 3D elements or, for more complex, high-performance planet rendering, consider direct integration with native graphics APIs (OpenGL ES / Metal) via Flutter plugins. This ensures optimal performance and visual fidelity on mobile devices.\n+Extensive Capabilities: Ideal for dynamic planet rendering, particle effects, and custom visual feedback across platforms.\n+Audio: Tone.js (for Web) / audioplayers or just_audio (for Flutter)\n+Web Audio API Integration (Tone.js): Provides advanced control over audio synthesis, effects, and sequencing for rich, dynamic soundscapes on the web.\n+Flutter Audio: audioplayers or just_audio packages will be used for robust audio playback, sound effects, and dynamic background music in the native Flutter apps, ensuring low-latency and high-quality audio experiences.\n+Thematic Audio: Enables creation of custom \"chimes,\" \"thrums,\" and evolving background music that perfectly matches the cosmic theme.\n+Backend Integration (APIs): Seamless communication with:\n+Starknet Account Abstraction (for transparent wallet management).\n+Perpetuals Exchange API (for \"Stellar Flux\" data and \"Quantum Harvesting\").\n+Fiat On-Ramp SDK (for \"Lumina Conduit\").\n+Gemini API (for \"Cosmic Forecasts\" via gemini-2.0-flash).\n+Firestore (for real-time game state, leaderboards, and social data).\n+4. User Flow Highlights (Frontend Experience)\n+Onboarding (\"First Glimmer\"): User lands on a visually stunning splash screen. A single \"Sign in with Google/Apple\" button. Upon success, they select a \"Cosmic Seed\" from a visually appealing carousel. Instantly, their basic planet appears, ready for \"Orbital Forging.\"\n+Idle Gameplay (\"Orbital Forging\"): The main screen displays the planet. A prominent, glowing Quantum Core invites taps. Astro-Forgers visually orbit. SS counter updates in real-time with satisfying animations. Intuitive buttons for \"Upgrade Astro-Forger\" and \"Expand Planet\" are clearly visible.\n+Pro Trader Ascension (\"Genesis Ignition\"): A \"Cosmic Genesis\" quest icon glows. Tapping it reveals a beautiful narrative sequence explaining the need for \"Lumina.\" The \"Lumina Conduit\" UI guides them through a simple fiat-to-crypto purchase. The \"First Harvest\" UI presents a simplified \"Orbital Ascent/Gravitational Descent\" choice. The subsequent \"Genesis Metamorphosis\" is a full-screen, unskippable visual spectacle, followed by the \"Lumina Cascade\" bonus.\n+Lumina Weaver Loop (\"Quantum Harvesting\" & \"Cosmic Genesis Grid\"): The Quantum Core is now active. Tapping it reveals the \"Cosmic Genesis Grid\" – a visually clear grid with empty nodes. Users drag and drop Lumina to activate nodes, seeing energy flow and new structures appear. The \"Cosmic Forge\" is easily accessible for \"Quantum Harvesting.\"\n+5. Monetization & Retention (Frontend Impact)\n+The frontend is designed to naturally drive monetization and retention:\n+Aesthetic Aspiration: The visually superior \"Pro Trader\" planets, exclusive cosmetics, and prestigious NFTs are aspirational goals, encouraging F2P users to \"Go Pro.\"\n+Addictive Loops: The immediate, satisfying feedback loops for SS generation and Lumina harvesting, combined with variable rewards (Stardust Lottery), ensure high daily active users (DAU).\n+Social Proof: The \"Lumina Flow Leaderboard\" and \"Verified Lumina Weaver\" flair provide powerful social validation, driving competitive engagement and retention.\n+NFT Collectibility: The visually stunning and functionally beneficial \"Artifact NFTs\" and \"Event NFTs\" create a strong desire for collection and ownership.\n+Conclusion\n+AstraTrade's frontend is not merely an interface; it is the gateway to a captivating cosmic journey. By meticulously abstracting complexity, prioritizing visual and auditory immersion, and leveraging a robust, modern tech stack (including Flutter for native mobile), we are building a gamified trading application that will stand out in the market. Our commitment to a frictionless, addictive, and deeply rewarding user experience positions AstraTrade for significant user acquisition, high retention, and strong monetization, making it an exceptionally compelling investment opportunity for venture judges seeking the next frontier in interactive finance.\ndiff --git a/knowledge_base/docs/project_design/game_design.md b/knowledge_base/docs/project_design/game_design.md\nnew file mode 100644\nindex 0000000..e69de29\ndiff --git a/knowledge_base/docs/project_design/game_specs.md b/knowledge_base/docs/project_design/game_specs.md\nnew file mode 100644\nindex 0000000..b736f7d\n--- /dev/null\n+++ b/knowledge_base/docs/project_design/game_specs.md\n@@ -0,0 +1,176 @@\n+AstraTrade: Game Specifications \n+This document provides detailed technical specifications for implementing AstraTrade, a gamified perpetuals trading application. It adheres to the \"Cosmic Catalyst\" design philosophy (v4.0), emphasizing radical abstraction of blockchain and trading complexities into an addictive, visually rewarding cosmic growth experience.\n+1. Core Game Mechanics\n+1.1. Orbital Forging (Free-to-Play Layer)\n+Currency: Stellar Shards (SS) - The primary, abundant in-game currency.\n+Generation Methods:\n+Manual Tap: User taps on the central planet/Quantum Core. Each tap triggers a \"Forge Cycle\" generating a base amount of SS.\n+Automated (Astro-Forgers): Bots (Astro-Forgers) are purchased and upgraded with SS. Each Astro-Forger automatically performs \"Forge Cycles\" at a defined interval, generating SS over time.\n+Efficiency Calculation: SS generation rate per Astro-Forger is determined by its base level, specific type, active \"planet health\" buffs, and any active \"Cosmic Genesis Node\" multipliers.\n+Visual & Auditory Feedback Loop (The \"Astro-Forging Beat\"):\n+Visual: On every SS generation (manual tap or automated cycle), emit a vibrant, customizable particle burst from the point of origin (planet tap location or Astro-Forger). The color and intensity of the burst should scale with the amount of SS generated (e.g., larger, brighter burst for \"Crit Forges\").\n+Auditory: Play a distinct, harmonious \"chime\" sound effect for each SS generation. A unique, deeper, and more resonant chime should play for \"Crit Forges.\"\n+Planet Growth Visuals: Accumulation of SS should visibly contribute to minor, incremental, organic changes on the planet's surface (e.g., new flora sprouting, small, intricate structures appearing, atmospheric density visibly increasing). These changes are cosmetic but provide a sense of continuous progression.\n+Spending SS: SS is used to:\n+Purchase new Astro-Forgers (unlocks new automation tiers).\n+Upgrade existing Astro-Forgers (increases their SS generation rate and unlocks new visual tiers for the Astro-Forger model).\n+Unlock and expand \"Terraforming Blocks\" (new landmasses/biomes on the planet, expanding the visual canvas).\n+Purchase \"Cosmic Flora & Fauna\" (cosmetic elements that also provide minor, passive SS generation buffs or visual flair).\n+Upgrade \"Basic Core Upgrades\" (incremental, flat percentage boosts to overall SS generation, \"Crit Chance,\" and \"Foraging Speed\").\n+1.2. Quantum Harvesting (Pro Trader Layer)\n+Currency: Lumina (LM) - The premium, highly coveted progression resource.\n+Generation: LM is exclusively \"harvested\" from real-money trades executed via the \"Cosmic Forge\" UI.\n+Formula: LM_generated = Base_LM * f(Trade_PnL_Ratio, Trade_Volume, Consecutive_Win_Streak, Quantum_Harvest_Efficiency_Multiplier).\n+A positive PnL ratio, higher volume, and longer consecutive win streaks significantly increase LM generation.\n+Even losing trades (negative PnL) will generate a small, fixed amount of \"Stardust Fragments\" (see 4.1) and contribute to \"Shield Dust\" (see 4.2), ensuring a form of reward even without LM.\n+Visual Feedback:\n+Harvest Animation: Upon successful LM generation, a captivating animation of glowing Lumina particles visually flows from the \"Cosmic Forge\" UI (trading interface) directly into the Quantum Core at the center of the player's planet.\n+\"Quantum Harvest Efficiency Gauge\": A dynamic, pulsating energy bar or radial gauge within the \"Cosmic Forge\" UI that visually fills up in real-time during a trade's outcome, indicating the efficiency of the current trade in generating LM. A full gauge signifies maximum LM harvest.\n+2. Player Journey & Progression\n+2.1. Stage 0: Frictionless Onboarding – The First Glimmer\n+Login Flow: Implement social login (Google/Apple OAuth) as the sole entry point.\n+Backend Wallet Creation (Transparent): Upon successful social login, trigger a backend process to create a secure smart contract wallet (Starknet Account Abstraction). This entire process must be completely transparent and hidden from the user. No wallet addresses, seed phrases, or gas fees are ever explicitly mentioned or shown.\n+Initial Planet Selection: User is presented with a visually appealing carousel of \"Cosmic Seeds\" (planet archetypes: e.g., \"Verdant,\" \"Volcanic,\" \"Crystalline\"). This choice is initially cosmetic but influences early biome aesthetics.\n+2.2. Stage 1: The Cosmic Gardener – Nurturing the Seed\n+Default State: All new users begin in this F2P state, with access only to the \"Orbital Forging\" mechanics.\n+UI Elements: The main screen prominently displays their chosen planet. A dormant \"Quantum Core\" at the planet's center pulses faintly, a visual mystery. A \"Lumina Flow Leaderboard\" (read-only initially) shimmers on a separate tab, subtly introducing the concept of a higher tier of power and elite status.\n+\"Cosmic Hints\" (Soft Education): Implement a system for subtle, non-intrusive in-game hints. These could be animated \"Cosmic wisps\" that occasionally float across the screen with short, thematic text overlays (e.g., \"The Quantum Core sleeps, awaiting Lumina to awaken its true power...\", \"The most vibrant planets have harnessed Lumina's energy...\"). These hints are designed to pique curiosity without overwhelming.\n+2.3. Stage 2: Genesis Ignition – The First Spark of Lumina\n+This is the pivotal, celebrated initiation into the Pro Trader layer.\n+Trigger: The \"Cosmic Genesis\" Quest becomes available (e.g., after reaching a certain cumulative SS threshold, time played, or specific Astro-Forger upgrade). A prominent, glowing quest icon appears.\n+\"Lumina Conduit\" (On-Ramp):\n+Integrate a secure fiat-to-crypto on-ramp solution SDK (e.g., Banxa, Ramp, MoonPay).\n+The UI for this process must be highly stylized as a \"Lumina Conduit\" – a visually engaging, animated interface where players \"channel\" external energy (fiat currency) into their account. The focus is on the flow of energy into the game's ecosystem, not a financial transaction.\n+Handle the purchase of a small, pre-defined amount of crypto (e.g., USDC) directly within the app's themed UI.\n+\"First Harvest\" Guided Trade:\n+After funding, the player is presented with a simplified, visually guided \"First Harvest\" scenario.\n+Abstraction: Trading parameters are abstracted into cosmic terms (e.g., \"Detecting Stellar Flux,\" \"Optimizing Orbital Trajectory\").\n+Simplified Choice: User makes a simple \"direction\" choice: \"Orbital Ascent\" (long) or \"Gravitational Descent\" (short) via intuitive visual buttons. Minimal other parameters are exposed initially.\n+Simulated PnL (Pre-Trade): Briefly display a tiny, simulated PnL (abstracted as \"Stellar Gain/Loss\") before the real trade executes, to familiarize the user with the concept of market movement without real risk.\n+Execution: The system handles the underlying real trade execution on a perpetuals exchange (via backend integration).\n+Permanent Cosmic Awakening (\"Genesis Metamorphosis\"):\n+Upon successful execution of this very first real-money trade, the player's planet undergoes a dramatic, full-screen, unskippable animation. This could involve rings of energy coalescing around the planet, new celestial bodies appearing in orbit, or the Quantum Core erupting with brilliant light.\n+This is a permanent, irreversible visual upgrade – a clear, superior, and visible indicator of their \"Pro\" status.\n+\"Lumina Cascade\" Bonus: Immediately following the metamorphosis, grant a substantial, one-time Lumina bonus. This bonus is visually delivered as a spectacular cascade of glowing particles pouring directly into the Quantum Core. This allows the player to instantly unlock their first \"Cosmic Genesis Node\" or a powerful \"Lumina Infusion\" to feel its immediate impact.\n+2.4. Stage 3: The Lumina Weaver – Orchestrating the Cosmos\n+After \"Genesis Ignition,\" the player accesses a new, powerful dimension of the game where real trades directly influence their cosmic destiny.\n+The Quantum Core & \"Cosmic Genesis\" Grid:\n+The Quantum Core, now active and glowing, becomes the central interactive element.\n+A grid-based UI (the \"Cosmic Genesis Grid\") appears on the planet's surface, radiating from the Core. This grid contains empty \"Cosmic Genesis Nodes.\"\n+LM is spent to activate and upgrade these nodes. Each node has a unique visual representation (e.g., a \"Graviton Amplifier,\" \"Chrono-Accelerator,\" \"Bio-Synthesis Nexus\"), implying its function through cosmic metaphors.\n+Cosmic Genesis Node Effects (Specific & Impactful): Each activated/upgraded Genesis Node provides a specific, highly impactful multiplier or passive effect on the idle game's \"Orbital Forging\" mechanics, rather than a generic multiplier.\n+Example Effects:\n+\"Graviton Amplifier Level 1\": Multiplies SS generation from Astro-Forgers in specific biomes by X%.\n+\"Chrono-Accelerator Level 1\": Reduces upgrade timers for F2P elements (Astro-Forgers, Terraforming) by Y%.\n+\"Bio-Synthesis Nexus Level 1\": Boosts SS generation from \"Cosmic Flora & Fauna\" by Z%.\n+\"Dimensional Shifter Level 1\": Grants a small chance for bonus SS drops from any source.\n+Dynamic Visual Feedback: As Lumina is infused into nodes, energy visibly flows from the Quantum Core, illuminating pathways and structures on the grid, creating a sense of powerful, directed growth and strategic investment.\n+Strategic LM Infusion: Pro Traders gain the strategic choice of how to \"infuse\" their harvested Lumina:\n+Core Overclocking: Increases the base global SS multiplier from the Quantum Core.\n+Resonance Amplifiers: Unlocks new visual effects and powerful temporary boosts for \"Resonance Spikes\" (see 3.2).\n+Planetary Schema Expansion: Unlocks entirely new, Pro-exclusive building plots or biomes on your planet. These are visually distinct, often more complex, and offer unique, high-tier SS generation methods or advanced cosmetic options.\n+The \"Catalyst Flow\" – Integrated Dual Gameplay: The player is now simultaneously engaged in:\n+The Idle Game (Orbital Forging): Continuously generates Stellar Shards at a hyper-accelerated rate, dynamically shaped by their Lumina investments, to expand their planet's physical domain.\n+The Pro Game (Quantum Harvesting): Strategically placing real trades to harvest Lumina. This Lumina is then used to activate and level up \"Cosmic Genesis Nodes,\" infuse \"Resonance Amplifiers,\" and expand their \"Planetary Schema,\" creating a powerful, self-reinforcing feedback loop that makes their idle game exponentially more powerful and visually spectacular.\n+3. Abstraction Layer Details (Critical for User Experience)\n+3.1. Market Data Abstraction (\"Stellar Flux\")\n+Visual Representation: Real-time market data (e.g., BTC/USDC price movements) are abstracted into visually compelling, dynamic \"Stellar Flux\" graphs. These are not traditional candlesticks but rather undulating energy waves, shimmering nebulae, or fluctuating gravitational fields. The visual intensity and pattern should intuitively convey volatility and trend.\n+Trading Direction: User choices are abstracted to \"Orbital Ascent\" (long position) or \"Gravitational Descent\" (short position), represented by clear, thematic visual buttons.\n+\"Cosmic Forecasts\": Integrate an LLM (specifically gemini-2.0-flash) to generate simplified, thematic \"forecasts\" based on real market sentiment or technical indicators.\n+LLM Prompt: \"Analyze current market sentiment for [asset pair, e.g., BTC/USDC] and provide a short, cosmic-themed forecast (e.g., 'Nebula Forming: Volatility Ahead', 'Stellar Drift: Steady Ascent', 'Solar Flare Imminent: Sharp Drop Expected'). Do not use financial jargon, numbers, or specific trading advice. Focus purely on a metaphorical cosmic prediction.\"\n+Display: Display these forecasts as short, animated text snippets or subtle visual cues (e.g., a small nebula appearing on the \"Stellar Flux\" graph).\n+3.2. PnL & Volume Abstraction (\"Lumina Harvest Efficiency\")\n+Lumina Harvest Efficiency Gauge: For each real trade, a dynamic visual gauge (e.g., a pulsating energy bar or radial fill) is displayed. It fills up to indicate the efficiency of the current trade in generating Lumina. A full gauge signifies maximum LM generation (profitable trade with high volume/streak). A partially filled or empty gauge indicates lower/zero LM generation.\n+Loss Aversion Mitigation:\n+No Explicit \"Loss\": The term \"loss\" is never explicitly shown. Instead, a losing trade results in \"Lumina Harvest Efficiency: Low\" or \"Lumina Harvest Efficiency: Zero.\" The focus is always on what was gained (even if minimal, like Stardust Fragments or Shield Dust), not what was lost.\n+Stardust Fragments: Even losing trades contribute a small, fixed amount of \"Stardust Fragments\" (visualized as tiny, shimmering particles) towards the Stardust Lottery.\n+\"Cosmic Resonance Spikes\": Successful real trades don't just grant LM; they trigger temporary \"Resonance Spikes\" from your Quantum Core. These are visually stunning energy waves that visibly channel across your planet, activating \"Supercharged Nodes\" or temporarily boosting specific resource generation zones (see 2.4).\n+3.3. Blockchain Abstraction\n+Zero Blockchain Terminology: Absolutely no terms like \"wallet,\" \"gas fees,\" \"chain,\" \"transaction hash,\" \"smart contract,\" \"dApp,\" \"minting,\" \"staking,\" etc., are ever exposed to the user.\n+\"Cosmic Vault\" / \"Lumina Reservoir\": The user's account balance (fiat/crypto) is displayed as their \"Cosmic Vault\" or \"Lumina Reservoir,\" using cosmic iconography and animations.\n+\"Cosmic Friction\": Gas fees are entirely abstracted away and subsidized by the game. If an unavoidable, negligible fee occurs, it's represented as a brief, ethereal shimmer or a subtle \"Cosmic Friction\" visual effect during a process, with no numerical value displayed.\n+Seamless Integration: The backend handles all wallet creation, key management (secure enclave), and transaction signing via Starknet Account Abstraction without any user interaction or awareness.\n+Integrated On-Ramp: As specified in 2.3, the \"Lumina Conduit\" is a fully integrated, in-app experience.\n+4. Direct Rewards & Risk Mitigation\n+4.1. Stardust Lottery\n+Mechanism: Every real trade (win or lose) grants one \"Stardust Ticket.\" Additionally, all trades (including losing ones) contribute a small, fixed amount of \"Stardust Fragments\" that accumulate towards bonus tickets.\n+Lottery Draw: A weekly automated lottery draw occurs at a fixed time. Winners are announced via in-game notifications and a dedicated \"Cosmic News\" feed.\n+Prizes: Large LM pools, exclusive limited-edition NFTs (cosmetic only, no gameplay advantage), and unique planetary cosmetic elements.\n+4.2. Shield Generation (\"Shield Dust\")\n+Generation: Real trading activity (win or lose) passively generates \"Shield Dust.\" The rate of generation increases with trading volume.\n+Consumption & Effect: \"Shield Dust\" is automatically consumed when a mock trade (in the idle game) would result in a negative effect (e.g., a bot's SS generation temporarily dipping, a \"planet decay\" event).\n+Visuals: When consumed, an animated \"Shield Aura\" visually envelops the affected Astro-Forger or biome, absorbing the \"negative energy\" and preventing any detrimental impact on the idle game. A calming sound effect accompanies the shield activation. This provides a tangible sense of protection and reduces the perceived punishment of idle game losses.\n+4.3. Pro-Exclusive \"Quantum Anomalies\"\n+Trigger: Rare, procedurally generated events triggered by significant cumulative LM earnings or specific real-trading milestones (e.g., completing a high-volume trade, achieving a long streak).\n+Manifestation: Visually distinct, temporary cosmic phenomena appear near the player's planet (e.g., a swirling wormhole, an unstable energy field, a rogue celestial body).\n+Interaction: Interacting with Anomalies involves unique, gamified micro-quests or challenges:\n+Trading Challenges: \"Sustain a 5-trade winning streak during this anomaly to stabilize it.\"\n+Strategic Decisions: Choosing a path within the anomaly that has different risk/reward outcomes.\n+Mini-Games: Simple, quick mini-games that, if completed successfully, yield rewards.\n+Rewards: Massive SS bonuses, rare cosmetic drops, small bonus LM rewards, or exclusive \"Anomaly Fragments\" that can be combined for unique items.\n+Risk/Reward: Some anomalies might present a slight, temporary risk (e.g., a brief reduction in SS generation if the challenge is failed), but with proportionally greater rewards for success. The risk is always framed in game terms, not financial terms.\n+5. Advanced Social & Prestige Systems\n+5.1. Dual Leaderboards\n+Trade Token Leaderboard: Ranks all players (F2P and Pro) based on accumulated SS earnings, showcasing idle game mastery.\n+Lumina Flow Leaderboard: The ultimate \"Pro\" leaderboard, ranking players by total LM harvested. This is the true measure of trading prowess and cosmic influence.\n+UI: Clear, visually distinct leaderboards with smooth scrolling. Each entry features the player's chosen avatar/name, their current mini-planet icon, and their \"Verified Lumina Weaver\" flair if applicable.\n+5.2. \"Verified Lumina Weaver\" Flair & Visual Cues\n+Activation: Automatically applied to a player's profile and planet upon successful \"Genesis Ignition.\"\n+Visuals: A distinct, permanent visual flair (e.g., a shimmering, animated cosmic aura around their planet, a special animated badge by their name) visible across all social features and leaderboards, immediately signifying their elevated status.\n+5.3. Interactive \"Trading Constellations\" (Guilds)\n+Formation: Players can form or join \"Trading Constellations\" (guilds/alliances).\n+Galactic Map Visualization: Member planets visually cluster together on a dynamic, zoomable galactic map. The constellation grows larger, brighter, and more elaborate (e.g., forming nebulae, connecting via light-speed lanes) based on the collective LM earnings and achievements of its members.\n+Inter-Constellation Challenges: Weekly or monthly \"Cosmic Market Challenges\" encourage friendly competition between constellations. Guilds compete to achieve specific collective trading objectives (e.g., highest collective \"Stellar Gain\" in a specific \"Stellar Flux\" type, most consistent trading volume over a period) for shared LM bonuses, unique temporary constellation-wide visual effects, and exclusive cosmetic rewards for all members.\n+5.4. \"Pro Trader Broadcasts\" & \"Market Pulse\"\n+\"Market Pulse Insights\": Top-ranked \"Lumina Weavers\" (e.g., top 100 on the Lumina Flow Leaderboard) are given the option to periodically share short, text-based \"Market Pulse Insights.\"\n+Content: Observations on \"Stellar Flux\" trends or strategic approaches (must be non-financial advice, system-moderated for appropriate content).\n+Display: A dedicated in-game feed where players can view, \"like,\" and \"react\" to these insights, fostering community discussion.\n+\"Pro Trader Spotlight\": A visually appealing rotating feature on the main screen showcasing a top-ranked player's unique planet, LM progress, and a brief, pre-approved bio or \"cosmic philosophy\" on trading, inspiring the broader player base.\n+6. The Long Game: Cosmic Ascension & NFT Utility\n+6.1. Cosmic Ascension Tiers\n+Progression: Beyond accumulating LM, Pro Traders ascend through Cosmic Ascension Tiers (e.g., \"Nebula Novice,\" \"Stellar Strategist,\" \"Galaxy Grandmaster,\" \"Universal Sovereign\"). Tiers are unlocked by reaching significant cumulative LM milestones and completing specific real-trading achievements (e.g., \"Achieve X total Stellar Gain,\" \"Maintain Z streak across 3 months,\" \"Participate in Y Quantum Anomalies\").\n+Tier Rewards: Each ascension tier unlocks progressively grander rewards:\n+Exclusive Planet Customization: New, visually distinct and undeniably prestigious options (e.g., orbiting moons, advanced space stations, cosmic weather patterns, unique planetary rings).\n+Elite Astro-Forgers: Unique Astro-Forger models with special abilities (e.g., a \"Market Oracle Bot\" that provides subtle, non-financial \"hints\" in the idle game, or a \"Volatility Harvester Bot\" that thrives during specific \"Stellar Flux\" conditions).\n+Enhanced Stardust Lottery payouts and improved odds.\n+Access to exclusive social hubs or private channels within the game, fostering an elite community.\n+6.2. NFT Utility\n+Exclusive Minting Whitelist: Only Pro Trader wallets (identified by their underlying smart contract wallet) are whitelisted for minting the most prestigious cosmetic NFTs. These NFTs are verifiable on-chain and serve as ultimate status symbols.\n+\"Artifact NFTs\": Introduce rare \"Artifact NFTs\" that, when held in the user's wallet, grant minor, non-game-breaking passive benefits in the idle game (e.g., \"+1% Astro-Forger efficiency,\" \"-0.5% upgrade costs,\" \"grants a slight boost to crit chance\"). These are carefully balanced to be non-pay-to-win, acting as subtle advantages that reward long-term engagement and collection.\n+\"Event NFTs\": Limited-edition NFTs issued for participating in specific in-game events, achieving challenging trading milestones, or excelling in Constellation Challenges. These offer both prestige and potential future utility in new game modes or collaborations.\n+7. Technical Considerations for AI Coders\n+This section details the specific technologies and implementation considerations, differentiating between native mobile (Flutter) and web (React) where necessary.\n+Frontend Frameworks:\n+Native Mobile (iOS & Android): Flutter\n+Rationale: Chosen for its ability to build natively compiled, high-performance, and visually rich applications from a single codebase. Its expressive UI toolkit and strong support for custom animations make it ideal.\n+State Management: Provider, Riverpod, or Bloc for robust and scalable state management.\n+UI/UX: Leverage Flutter's custom painting capabilities and widget composition for bespoke cosmic aesthetics and animations.\n+Styling:\n+Native Mobile (Flutter): Custom Thematic Styling. Flutter's powerful widget system and custom painting (CustomPainter) will be leveraged to create bespoke, highly animated, and thematically consistent UI components. This ensures the unique cosmic aesthetic is delivered natively without reliance on external CSS frameworks. Focus on Material Design principles adapted to the cosmic theme.\n+Web (React): Tailwind CSS. Utilized extensively for rapid UI development and consistent design system implementation, ensuring full responsiveness.\n+3D Graphics:\n+Native Mobile (Flutter): Explore flutter_3d_controller for simpler 3D elements (e.g., orbiting Astro-Forgers). For the complex, high-performance planet rendering and particle systems, consider direct integration with native graphics APIs (OpenGL ES / Metal) via Flutter plugins (e.g., flutter_gl or custom FFI bindings to a C++ rendering engine). This ensures optimal performance and visual fidelity.\n+Web (React): three.js. Powerful library for creating and rendering complex 3D scenes directly in the browser. Optimize three.js scenes for mobile GPUs (LOD, instancing, careful polygon budgeting).\n+Audio:\n+Native Mobile (Flutter): audioplayers or just_audio packages. For robust audio playback, low-latency sound effects, and dynamic background music. Implement a system for layering music tracks based on player progress and \"Stellar Flux\" conditions.\n+Web (React): Tone.js. For advanced control over audio synthesis, effects, and dynamic background music, leveraging the Web Audio API.\n+Backend Integration (APIs): Seamless communication with:\n+Starknet Account Abstraction: Implement SDK/API calls for transparent wallet creation, key management (secure enclave integration), and transaction signing.\n+Perpetuals Exchange API: Connect to a chosen perpetuals exchange (e.g., dYdX, GMX) for real-time market data (\"Stellar Flux\") and trade execution (\"Quantum Harvesting\"). All API calls must be abstracted.\n+Fiat On-Ramp SDK/API: Integrate selected on-ramp provider (e.g., Banxa, Ramp, MoonPay) SDK for the \"Lumina Conduit\" functionality.\n+LLM Integration: gemini-2.0-flash for \"Cosmic Forecasts\" (as detailed in 3.1) and potentially other dynamic text generation for in-game events or narrative elements.\n+Firestore: Utilize Firestore for all game state persistence, player progress, social data, and leaderboards.\n+Security Rules: Implement strict Firestore security rules (public/private data as per previous instructions).\n+Real-time Updates: Utilize onSnapshot() listeners for real-time UI updates across all relevant game elements (e.g., SS/LM counters, leaderboard changes, planet state).\n+Error Handling: Implement robust try/catch blocks and user-friendly, in-game error messages (no alert() or confirm() dialogs). Use custom modal UI for critical information.\n+Performance Optimization:\n+Optimize animations, particle systems, and data fetching to ensure a smooth, fluid experience across all platforms, especially on mobile.\n+Minimize Cumulative Layout Shifts (CLS) in web and ensure smooth frame rates in Flutter.\n+Implement lazy loading for assets to reduce initial load times.\n+Security: Prioritize secure coding practices, especially for all financial interactions and API key management. Ensure all sensitive data is handled securely on the backend.\n+User Experience (UX) Principles:\n+Intuitive Design: All UI elements must be self-explanatory and visually appealing, relying on cosmic metaphors rather than explicit instructions.\n+Immediate Feedback: Provide instant and clear visual, auditory, and haptic (where supported) feedback for every user action.\n+Clear Progress Indicators: Use animated progress bars, fill animations, and clear numerical displays for all growth metrics (SS, LM, upgrade progress).\n+Responsive Layouts: Ensure optimal viewing and interaction on all devices and orientations.\n+\ndiff --git a/knowledge_base/docs/project_design/user_archetypes.md b/knowledge_base/docs/project_design/user_archetypes.md\nnew file mode 100644\nindex 0000000..e69de29",
  "metadata": {
    "type": "commit",
    "special_code": "92e73713b26b888445f095b1f3f194d57b043072",
    "author": "Peter",
    "date": "2025-07-11 18:22:46 +0700"
  }
}